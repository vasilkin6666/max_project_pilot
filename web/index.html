<!DOCTYPE html>
<html lang="ru" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Pilot - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/components/header.css">
    <link rel="stylesheet" href="css/components/modals.css">
    <link rel="stylesheet" href="css/components/views.css">
    <link rel="stylesheet" href="css/components/tasks.css">
    <link rel="stylesheet" href="css/themes/light.css" id="light-theme">
    <link rel="stylesheet" href="css/themes/dark.css" id="dark-theme" disabled>
    <script src="https://st.max.ru/js/max-web-app.js"></script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <p>–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="app" class="app-container" style="display: none;">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <h1 class="app-title">Project Pilot</h1>
                    <nav class="main-nav">
                        <button class="nav-btn active" data-view="dashboard">
                            <span class="nav-icon">üìä</span>
                            <span class="nav-text">–î–∞—à–±–æ—Ä–¥</span>
                        </button>
                        <button class="nav-btn" data-view="myTasks">
                            <span class="nav-icon">‚úÖ</span>
                            <span class="nav-text">–ú–æ–∏ –∑–∞–¥–∞—á–∏</span>
                        </button>
                    </nav>
                </div>

                <div class="header-right">
                    <div class="header-actions">
                        <button class="action-btn search-btn" id="searchProjectsBtn" title="–ü–æ–∏—Å–∫ –ø—Ä–æ–µ–∫—Ç–æ–≤">
                            <span class="btn-icon">üîç</span>
                        </button>

                        <button class="action-btn notifications-btn" id="notificationsBtn" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                            <span class="btn-icon">üîî</span>
                            <span class="notification-badge" id="notificationBadge" style="display: none;">0</span>
                        </button>

                        <button class="action-btn" id="createProjectBtn" title="–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç">
                            <span class="btn-icon">‚ûï</span>
                            <span class="btn-text">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</span>
                        </button>

                        <div class="user-menu">
                            <button class="user-btn" id="userMenuBtn">
                                <div class="user-avatar">
                                    <span id="userInitials">U</span>
                                </div>
                                <span class="user-name" id="userName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>
                            </button>
                            <div class="user-dropdown" id="userDropdown">
                                <button class="dropdown-item" data-action="profile">
                                    <span class="dropdown-icon">üë§</span>
                                    –ü—Ä–æ—Ñ–∏–ª—å
                                </button>
                                <button class="dropdown-item" data-action="settings">
                                    <span class="dropdown-icon">‚öôÔ∏è</span>
                                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                                </button>
                                <div class="dropdown-divider"></div>
                                <button class="dropdown-item" data-action="logout">
                                    <span class="dropdown-icon">üö™</span>
                                    –í—ã–π—Ç–∏
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Dashboard View -->
            <div id="dashboardView" class="view active">
                <div class="view-header">
                    <h2>–û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–æ–≤</h2>
                    <div class="view-actions">
                        <button class="btn btn-secondary" id="refreshDashboard">
                            <span class="btn-icon">üîÑ</span>
                            –û–±–Ω–æ–≤–∏—Ç—å
                        </button>
                    </div>
                </div>

                <!-- Statistics Cards -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon projects">üìÅ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="projectsCount">0</div>
                            <div class="stat-label">–ü—Ä–æ–µ–∫—Ç–æ–≤</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon tasks">‚úÖ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="tasksCount">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∑–∞–¥–∞—á</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon recent">üïí</div>
                        <div class="stat-content">
                            <div class="stat-number" id="recentTasksCount">0</div>
                            <div class="stat-label">–ù–µ–¥–∞–≤–Ω–∏–µ –∑–∞–¥–∞—á–∏</div>
                        </div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-icon completed">üéØ</div>
                        <div class="stat-content">
                            <div class="stat-number" id="completedTasksCount">0</div>
                            <div class="stat-label">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</div>
                        </div>
                    </div>
                </div>

                <!-- Recent Tasks Section -->
                <section class="section">
                    <div class="section-header">
                        <h3>–ù–µ–¥–∞–≤–Ω–∏–µ –∑–∞–¥–∞—á–∏</h3>
                        <button class="btn btn-link" onclick="App.showMyTasks()">
                            –í—Å–µ –∑–∞–¥–∞—á–∏
                            <span class="btn-icon">‚Üí</span>
                        </button>
                    </div>
                    <div id="recentTasksList" class="tasks-list compact">
                        <!-- Recent tasks will be loaded here -->
                    </div>
                </section>

                <!-- Projects Section -->
                <section class="section">
                    <div class="section-header">
                        <h3>–ú–æ–∏ –ø—Ä–æ–µ–∫—Ç—ã</h3>
                        <div class="view-controls">
                            <select class="view-select" id="projectsViewMode">
                                <option value="list">–°–ø–∏—Å–æ–∫</option>
                                <option value="grid">–ü–ª–∏—Ç–∫–∞</option>
                                <option value="board">–î–æ—Å–∫–∞</option>
                            </select>
                        </div>
                    </div>
                    <div id="projectsList" class="projects-container">
                        <!-- Projects will be loaded here -->
                    </div>
                </section>
            </div>

            <!-- My Tasks View -->
            <div id="myTasksView" class="view">
                <div class="view-header">
                    <h2>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
                    <div class="view-actions">
                        <div class="filters-bar">
                            <select class="filter-select" id="tasksFilterStatus" onchange="App.loadMyTasks()">
                                <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                                <option value="todo">–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</option>
                                <option value="in_progress">–í —Ä–∞–±–æ—Ç–µ</option>
                                <option value="done">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
                            </select>

                            <select class="filter-select" id="tasksFilterProject" onchange="App.loadMyTasks()">
                                <option value="">–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã</option>
                            </select>

                            <select class="filter-select" id="tasksFilterPriority" onchange="App.loadMyTasks()">
                                <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                                <option value="urgent">–°—Ä–æ—á–Ω—ã–π</option>
                                <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="low">–ù–∏–∑–∫–∏–π</option>
                            </select>
                        </div>

                        <select class="view-select" id="tasksViewMode">
                            <option value="list">–°–ø–∏—Å–æ–∫</option>
                            <option value="board">–î–æ—Å–∫–∞</option>
                            <option value="calendar">–ö–∞–ª–µ–Ω–¥–∞—Ä—å</option>
                        </select>
                    </div>
                </div>

                <div id="myTasksContainer">
                    <div id="myTasksList" class="tasks-container">
                        <!-- User tasks will be loaded here -->
                    </div>
                </div>
            </div>

            <!-- Project Details View -->
            <div id="projectView" class="view">
                <!-- Project header and content will be dynamically loaded -->
            </div>

            <!-- Task Details View -->
            <div id="taskView" class="view">
                <!-- Task content will be dynamically loaded -->
            </div>

            <!-- Search Projects View -->
            <div id="searchProjectsView" class="view">
                <!-- Search content will be dynamically loaded -->
            </div>

            <!-- Profile View -->
            <div id="profileView" class="view">
                <!-- Profile content will be dynamically loaded -->
            </div>

            <!-- Settings View -->
            <div id="settingsView" class="view">
                <!-- Settings content will be dynamically loaded -->
            </div>
        </main>

        <!-- Toast Notifications -->
        <div id="toastContainer" class="toast-container"></div>
    </div>

    <!-- All Modals will be loaded here dynamically -->
    <div id="modalsContainer"></div>

    <!-- Scripts -->
    <script src="js/modules/utils.js"></script>
    <script src="js/modules/cache.js"></script>
    <script src="js/modules/api.js"></script>
    <script src="js/modules/auth.js"></script>
    <script src="js/modules/notifications.js"></script>
    <script src="js/modules/gestures.js"></script>
    <script src="js/components/modals.js"></script>
    <script src="js/components/views.js"></script>
    <script src="js/components/tasks.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
