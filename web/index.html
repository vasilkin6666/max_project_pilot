<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Pilot Pro - –ü—Ä–µ–º–∏—É–º PWA –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <script src="https://st.max.ru/js/max-web-app.js"></script>
</head>
<body class="safe-area cosmic-theme">
    <!-- Cosmic Loading Overlay -->
    <div id="loading" class="cosmic-loading">
        <div class="cosmic-background">
            <div class="stars"></div>
            <div class="twinkling"></div>
            <div class="clouds"></div>
        </div>

        <div class="loading-content">
            <div class="cosmic-orbit">
                <div class="orbit-ring ring-1"></div>
                <div class="orbit-ring ring-2"></div>
                <div class="orbit-ring ring-3"></div>
                <div class="central-icon">üöÄ</div>
            </div>

            <h1 class="cosmic-title">Project Pilot Pro</h1>
            <p class="cosmic-subtitle">–ü—Ä–µ–º–∏—É–º —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏</p>

            <div class="progress-cosmic">
                <div class="progress-track"></div>
                <div class="progress-fill" id="cosmicProgress"></div>
                <div class="progress-glow"></div>
            </div>

            <div class="cosmic-cta">
                <p class="cta-text">–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞</p>
                <div class="pulse-dot"></div>
            </div>
        </div>

        <div class="cosmic-particles" id="cosmicParticles"></div>
    </div>

    <!-- Main App -->
    <div id="app" class="cosmic-app">
        <!-- Cosmic Header -->
        <header class="cosmic-header">
            <div class="header-orbits">
                <div class="header-orbit"></div>
            </div>
            <div class="container">
                <div class="header-content">
                    <div class="logo-section">
                        <div class="logo-orb">
                            <div class="logo-inner">üöÄ</div>
                        </div>
                        <h1 class="logo-text">Project Pilot Pro</h1>
                    </div>

                    <nav class="desktop-nav">
                        <div class="nav-orbits">
                            <button class="nav-orb active" data-view="dashboardView">
                                <span class="orb-icon">üìä</span>
                                <span class="orb-text">–ì–ª–∞–≤–Ω–∞—è</span>
                            </button>
                            <button class="nav-orb" data-view="myTasksView">
                                <span class="orb-icon">‚úÖ</span>
                                <span class="orb-text">–ó–∞–¥–∞—á–∏</span>
                                <span class="orb-badge">3</span>
                            </button>
                            <button class="nav-orb nav-orb-action" id="searchOrb" title="–ü–æ–∏—Å–∫">
                                <span class="orb-icon">üîç</span>
                            </button>
                            <button class="nav-orb nav-orb-action" id="notificationsOrb" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è">
                                <span class="orb-icon">üîî</span>
                                <span class="orb-badge pulse">2</span>
                            </button>
                            <button class="nav-orb" data-view="settingsView">
                                <span class="orb-icon">‚öôÔ∏è</span>
                                <span class="orb-text">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                            </button>
                        </div>
                    </nav>

                    <button class="cosmic-btn primary" id="createProjectBtn">
                        <span class="btn-orb"></span>
                        <span>–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</span>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="cosmic-main">
            <div class="cosmic-background-main">
                <div class="stars-main"></div>
                <div class="twinkling-main"></div>
            </div>

            <div class="container">
                <!-- Dashboard View -->
                <div id="dashboardView" class="cosmic-view active">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h2>
                            <p>–í–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å</p>
                        </div>
                        <div class="view-actions">
                            <button class="cosmic-btn ghost" id="refreshDashboard">
                                <span class="btn-icon">üîÑ</span>
                            </button>
                        </div>
                    </div>

                    <div class="cosmic-stats">
                        <div class="stat-orb">
                            <div class="stat-icon">üìÅ</div>
                            <div class="stat-data">
                                <div class="stat-value" id="projectsCount">0</div>
                                <div class="stat-label">–ü—Ä–æ–µ–∫—Ç–æ–≤</div>
                            </div>
                            <div class="stat-glow"></div>
                        </div>
                        <div class="stat-orb">
                            <div class="stat-icon">‚úÖ</div>
                            <div class="stat-data">
                                <div class="stat-value" id="tasksCount">0</div>
                                <div class="stat-label">–ó–∞–¥–∞—á</div>
                            </div>
                            <div class="stat-glow"></div>
                        </div>
                        <div class="stat-orb">
                            <div class="stat-icon">üî•</div>
                            <div class="stat-data">
                                <div class="stat-value" id="recentTasksCount">0</div>
                                <div class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</div>
                            </div>
                            <div class="stat-glow"></div>
                        </div>
                    </div>

                    <section class="cosmic-section">
                        <div class="section-header">
                            <h3>–í–∞—à–∏ –ø—Ä–æ–µ–∫—Ç—ã</h3>
                            <button class="cosmic-btn outline small" onclick="App.showCreateProjectModal()">
                                <span class="btn-icon">+</span>
                                –ù–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
                            </button>
                        </div>
                        <div id="projectsList" class="projects-grid-cosmic">
                            <!-- Projects will be loaded here -->
                        </div>
                    </section>

                    <section class="cosmic-section">
                        <div class="section-header">
                            <h3>–ù–µ–¥–∞–≤–Ω–∏–µ –∑–∞–¥–∞—á–∏</h3>
                        </div>
                        <div id="recentTasksList" class="tasks-list-cosmic">
                            <!-- Recent tasks will be loaded here -->
                        </div>
                    </section>
                </div>

                <!-- My Tasks View -->
                <div id="myTasksView" class="cosmic-view">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏</h2>
                            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º–∏ –º–∏—Å—Å–∏—è–º–∏</p>
                        </div>
                    </div>

                    <div class="cosmic-filters">
                        <div class="filter-group">
                            <label class="filter-label">–°—Ç–∞—Ç—É—Å</label>
                            <select class="cosmic-select" id="tasksFilterStatus">
                                <option value="">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                                <option value="todo">–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</option>
                                <option value="in_progress">–í —Ä–∞–±–æ—Ç–µ</option>
                                <option value="done">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
                            </select>
                        </div>
                        <div class="filter-group">
                            <label class="filter-label">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç</label>
                            <select class="cosmic-select" id="tasksFilterPriority">
                                <option value="">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                                <option value="low">–ù–∏–∑–∫–∏–π</option>
                                <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                                <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                                <option value="urgent">–°—Ä–æ—á–Ω—ã–π</option>
                            </select>
                        </div>
                    </div>

                    <div id="myTasksList" class="tasks-grid-cosmic">
                        <!-- Tasks will be loaded here -->
                    </div>
                </div>

                <!-- Settings View -->
                <div id="settingsView" class="cosmic-view">
                    <div class="view-header">
                        <div class="view-title">
                            <h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã</h2>
                            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º –ø—Ä–æ—Ñ–∏–ª–µ–º</p>
                        </div>
                    </div>

                    <div class="settings-grid">
                        <div class="setting-card cosmic">
                            <div class="setting-header">
                                <div class="setting-icon">üë§</div>
                                <h3>–ü—Ä–æ—Ñ–∏–ª—å MAX</h3>
                            </div>
                            <div class="setting-content">
                                <div class="profile-display">
                                    <div class="avatar-cosmic">
                                        <div class="avatar-image" id="maxAvatar">üöÄ</div>
                                        <div class="avatar-glow"></div>
                                    </div>
                                    <div class="profile-info">
                                        <div class="profile-name" id="maxUserName">–ö–æ—Å–º–æ–Ω–∞–≤—Ç</div>
                                        <div class="profile-id" id="maxUserId">ID: ---</div>
                                        <div class="profile-ip" id="maxUserIp">IP: ---</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="setting-card cosmic">
                            <div class="setting-header">
                                <div class="setting-icon">üé®</div>
                                <h3>–í–Ω–µ—à–Ω–∏–π –≤–∏–¥</h3>
                            </div>
                            <div class="setting-content">
                                <div class="theme-selector-cosmic">
                                    <div class="theme-option active" data-theme="cosmic">
                                        <div class="theme-preview cosmic"></div>
                                        <span>–ö–æ—Å–º–∏—á–µ—Å–∫–∞—è</span>
                                    </div>
                                    <div class="theme-option" data-theme="dark">
                                        <div class="theme-preview dark"></div>
                                        <span>–¢–µ–º–Ω–∞—è</span>
                                    </div>
                                    <div class="theme-option" data-theme="light">
                                        <div class="theme-preview light"></div>
                                        <span>–°–≤–µ—Ç–ª–∞—è</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="setting-card cosmic">
                            <div class="setting-header">
                                <div class="setting-icon">üîî</div>
                                <h3>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                            </div>
                            <div class="setting-content">
                                <div class="toggle-item-cosmic">
                                    <span>Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                                    <label class="cosmic-toggle">
                                        <input type="checkbox" checked>
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-glow"></span>
                                    </label>
                                </div>
                                <div class="toggle-item-cosmic">
                                    <span>Email-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                                    <label class="cosmic-toggle">
                                        <input type="checkbox">
                                        <span class="toggle-slider"></span>
                                        <span class="toggle-glow"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Project View -->
                <div id="projectView" class="cosmic-view">
                    <!-- Project content will be loaded dynamically -->
                </div>

                <!-- Task View -->
                <div id="taskView" class="cosmic-view">
                    <!-- Task content will be loaded dynamically -->
                </div>
            </div>
        </main>

        <!-- Cosmic Mobile Navigation -->
        <nav class="cosmic-tab-bar">
            <div class="tab-bar-orbits">
                <button class="tab-orb active" data-view="dashboardView">
                    <div class="tab-icon">üìä</div>
                    <div class="tab-label">–ì–ª–∞–≤–Ω–∞—è</div>
                    <div class="tab-glow"></div>
                </button>
                <button class="tab-orb" data-view="myTasksView">
                    <div class="tab-icon">‚úÖ</div>
                    <div class="tab-label">–ó–∞–¥–∞—á–∏</div>
                    <div class="tab-badge">3</div>
                    <div class="tab-glow"></div>
                </button>
                <button class="tab-orb fab-tab" id="mobileFab">
                    <div class="fab-icon">+</div>
                    <div class="fab-glow"></div>
                </button>
                <button class="tab-orb" data-view="notificationsView">
                    <div class="tab-icon">üîî</div>
                    <div class="tab-label">–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</div>
                    <div class="tab-badge pulse">2</div>
                    <div class="tab-glow"></div>
                </button>
                <button class="tab-orb" data-view="settingsView">
                    <div class="tab-icon">‚öôÔ∏è</div>
                    <div class="tab-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                    <div class="tab-glow"></div>
                </button>
            </div>
        </nav>

        <!-- Floating Action Menu -->
        <div class="cosmic-fab-menu">
            <button class="fab-item" data-action="search">
                <div class="fab-item-icon">üîç</div>
                <div class="fab-item-label">–ü–æ–∏—Å–∫</div>
            </button>
            <button class="fab-item" data-action="create-project">
                <div class="fab-item-icon">üìÅ</div>
                <div class="fab-item-label">–ü—Ä–æ–µ–∫—Ç</div>
            </button>
            <button class="fab-item" data-action="create-task">
                <div class="fab-item-icon">‚úÖ</div>
                <div class="fab-item-label">–ó–∞–¥–∞—á—É</div>
            </button>
        </div>
    </div>

    <!-- Cosmic Modals -->
    <!-- Create Project Modal -->
    <div id="createProjectModal" class="cosmic-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-cosmic">
                <div class="modal-header">
                    <div class="modal-orb">
                        <div class="modal-orb-icon">üìÅ</div>
                    </div>
                    <h3>–°–æ–∑–¥–∞—Ç—å –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –ø—Ä–æ–µ–∫—Ç</h3>
                    <button class="modal-close" onclick="App.hideModal('createProjectModal')">
                        <span>√ó</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form class="cosmic-form">
                        <div class="form-group-cosmic">
                            <label class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
                            <input type="text" class="cosmic-input" id="projectTitle" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–∏—Å—Å–∏–∏...">
                            <div class="input-glow"></div>
                        </div>
                        <div class="form-group-cosmic">
                            <label class="form-label">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                            <textarea class="cosmic-textarea" id="projectDescription" placeholder="–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∫–æ—Å–º–∏—á–µ—Å–∫—É—é –º–∏—Å—Å–∏—é..." rows="3"></textarea>
                            <div class="input-glow"></div>
                        </div>
                        <div class="toggle-group-cosmic">
                            <label class="toggle-label-cosmic">
                                <span class="toggle-text">–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç</span>
                                <label class="cosmic-toggle">
                                    <input type="checkbox" id="projectIsPrivate" checked>
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-glow"></span>
                                </label>
                            </label>
                            <label class="toggle-label-cosmic">
                                <span class="toggle-text">–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–æ–±—Ä–µ–Ω–∏–µ –¥–ª—è –≤—Å—Ç—É–ø–ª–µ–Ω–∏—è</span>
                                <label class="cosmic-toggle">
                                    <input type="checkbox" id="projectRequiresApproval">
                                    <span class="toggle-slider"></span>
                                    <span class="toggle-glow"></span>
                                </label>
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="cosmic-btn outline" onclick="App.hideModal('createProjectModal')">–û—Ç–º–µ–Ω–∞</button>
                    <button class="cosmic-btn primary" id="submitCreateProjectBtn">
                        <span class="btn-glow"></span>
                        –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Modal -->
    <div id="searchModal" class="cosmic-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-cosmic">
                <div class="modal-header">
                    <div class="modal-orb">
                        <div class="modal-orb-icon">üîç</div>
                    </div>
                    <h3>–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫</h3>
                    <button class="modal-close" onclick="App.hideModal('searchModal')">
                        <span>√ó</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="search-input-cosmic">
                        <input type="text" class="cosmic-input" placeholder="–ò—â–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç—ã –∏ –∑–∞–¥–∞—á–∏...">
                        <div class="search-icon">üîç</div>
                        <div class="input-glow"></div>
                    </div>
                    <div class="search-results">
                        <!-- Search results will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notifications Modal -->
    <div id="notificationsModal" class="cosmic-modal">
        <div class="modal-backdrop"></div>
        <div class="modal-container">
            <div class="modal-cosmic">
                <div class="modal-header">
                    <div class="modal-orb">
                        <div class="modal-orb-icon">üîî</div>
                    </div>
                    <h3>–ö–æ—Å–º–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h3>
                    <button class="modal-close" onclick="App.hideModal('notificationsModal')">
                        <span>√ó</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="notifications-list">
                        <!-- Notifications will appear here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Cosmic initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize cosmic particles
            initCosmicParticles();

            // Initialize loading animation
            initCosmicLoading();

            // Handle cosmic loading screen
            const cosmicLoading = document.getElementById('loading');
            const cosmicProgress = document.getElementById('cosmicProgress');

            if (cosmicLoading) {
                // Simulate loading progress
                let progress = 0;
                const progressInterval = setInterval(() => {
                    progress += Math.random() * 10;
                    if (progress >= 100) {
                        progress = 100;
                        clearInterval(progressInterval);

                        // Show CTA when ready
                        setTimeout(() => {
                            document.querySelector('.cosmic-cta').classList.add('ready');
                        }, 500);
                    }
                    cosmicProgress.style.width = progress + '%';
                }, 200);

                cosmicLoading.addEventListener('click', function() {
                    clearInterval(progressInterval);
                    cosmicProgress.style.width = '100%';

                    // Cosmic exit animation
                    this.style.opacity = '0';
                    this.style.transform = 'scale(1.1)';

                    setTimeout(() => {
                        this.style.display = 'none';
                        document.getElementById('app').style.display = 'block';

                        // Initialize main app
                        if (typeof App !== 'undefined') {
                            App.init();
                        }
                    }, 1000);
                });
            }

            // Add cosmic background to main app
            const mainApp = document.getElementById('app');
            if (mainApp) {
                const cosmicBg = document.createElement('div');
                cosmicBg.className = 'cosmic-background-app';
                cosmicBg.innerHTML = '<div class="stars-app"></div><div class="twinkling-app"></div>';
                mainApp.appendChild(cosmicBg);
            }
        });

        function initCosmicParticles() {
            const container = document.getElementById('cosmicParticles');
            if (!container) return;

            function createParticle() {
                const particle = document.createElement('div');
                particle.className = 'cosmic-particle';

                // Random properties
                const size = Math.random() * 3 + 1;
                const posX = Math.random() * 100;
                const posY = Math.random() * 100;
                const duration = Math.random() * 10 + 10;
                const delay = Math.random() * 5;

                particle.style.cssText = `
                    width: ${size}px;
                    height: ${size}px;
                    left: ${posX}%;
                    top: ${posY}%;
                    animation-duration: ${duration}s;
                    animation-delay: ${delay}s;
                `;

                container.appendChild(particle);

                // Remove particle after animation
                setTimeout(() => {
                    particle.remove();
                }, duration * 1000);
            }

            // Create initial particles
            for (let i = 0; i < 50; i++) {
                createParticle();
            }

            // Continue creating particles
            setInterval(createParticle, 300);
        }

        function initCosmicLoading() {
            const orbits = document.querySelectorAll('.orbit-ring');
            orbits.forEach((orbit, index) => {
                orbit.style.animationDelay = (index * 0.5) + 's';
            });
        }
    </script>
</body>
</html>
